<form (ngSubmit)="onSubmit($event)">
  <recipient-input [recipientValue]="recipient.addressRaw"
                   (recipientChange)="onRecipientChange($event)"
                   (qrCodeUpload)="onQRUpload($event)"
                   [disabled]="immutable">
  </recipient-input>
  <app-amount-input [maxAmount]="token.balance"
                    [symbol]="token.name"
                    [(amount)]="quantity"
                    [disabled]="immutable">

  </app-amount-input>

  <app-fee-selector [fees]="fees" [(fee)]="fee">
  </app-fee-selector>


  <mat-checkbox labelPosition="before"
                [disabled]="immutable"
                [(ngModel)]="showMessage"
                name="showMessage">
    {{ "add_message_q" | i18n }}
  </mat-checkbox>

  <div *ngIf="showMessage">
    <div class="inlined mt-4">
      <mat-checkbox
        class="font-size-12"
        labelPosition="before"
        [disabled]="immutable"
        [(ngModel)]="encrypt"
        name="encrypt">
        {{ "encrypt_message" | i18n }}?
      </mat-checkbox>
      <mat-checkbox
        class="font-size-12"
        labelPosition="before" [disabled]="immutable" [(ngModel)]="messageIsText"
        name="messageIsText">
        {{ "message_is_text" | i18n }}
      </mat-checkbox>
    </div>
    <mat-form-field>
      <textarea
        name="message"
        matInput [disabled]="immutable" [(ngModel)]="message"
        placeholder="{{ 'message' | i18n }}"
        cdkTextareaAutosize
      ></textarea>
    </mat-form-field>
  </div>

  <app-submit-transaction [disabled]="!canSubmit()"
                          [isSubmitting]="isSubmitting"
                          [(pin)] = "pin"
  >
  </app-submit-transaction>
  <div class="inlined">
    <div class="total">
      <strong>{{'total' | i18n}}:&nbsp;</strong>
      <span [class.error-text]="!hasSufficientQuantity()">{{this.token.name}} {{ this.getQuantity() }} </span>
      <small [class.error-text]="!hasSufficientBalance()">{{ this.fee | amount:'signa'}}</small>
    </div>
    <div>
      <span class="error-text">{{getErrorHint()}}</span>
    </div>
  </div>
</form>
